<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>女巫镇 - 引导页面</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- GSAP 动画库 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4a0878',
                        secondary: '#0066cc',
                        accent: '#cc0066',
                        dark: '#0a0a1a',
                        darker: '#050510',
                        light: '#b0b0c0'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                        serif: ['Playfair Display', 'Georgia', 'serif'],
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' },
                        }
                    }
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            }
            .text-shadow-glow {
                text-shadow: 0 0 10px rgba(106, 13, 173, 0.7), 0 0 20px rgba(106, 13, 173, 0.5);
            }
            .btn-hover {
                @apply transition-all duration-300 transform hover:scale-105 hover:shadow-lg;
            }
            .modal-transition {
                @apply transition-all duration-300 ease-in-out;
            }
            .glass-effect {
                @apply bg-white/10 backdrop-blur-md border border-white/20;
            }
        }
        
        body {
            background-color: theme('colors.darker');
            background-image: url('https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/c14ea43e48cd45e4936a8f4b606ac163~tplv-a9rns2rl98-image.image?rcl=202511251758556FADEA4E67B2AF9A134D&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1766656768&x-signature=BZpwF%2B7oLlLBU8orDj2iogo1J7U%3D');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            min-height: 100vh;
        }
        
        .btn-primary {
            @apply bg-gradient-to-r from-[#4A4A4A] to-[#2D2D2D] text-white font-bold py-4 px-8 rounded-lg shadow-lg btn-hover border-2 border-[#6A6A6A] relative overflow-hidden;
        }
        
        .btn-primary::before {
            content: '';
            @apply absolute inset-0 bg-gradient-to-r from-[#6A6A6A]/30 to-transparent transform -skew-x-12 translate-x-[-100%] transition-transform duration-700;
        }
        
        .btn-primary:hover::before {
            @apply translate-x-[100%];
        }
        
        .btn-secondary {
            @apply bg-gradient-to-r from-[#4A4A4A] to-[#2D2D2D] text-white font-bold py-4 px-8 rounded-lg shadow-lg btn-hover border-2 border-[#6A6A6A] relative overflow-hidden;
        }
        
        .btn-secondary::before {
            content: '';
            @apply absolute inset-0 bg-gradient-to-r from-[#6A6A6A]/30 to-transparent transform -skew-x-12 translate-x-[-100%] transition-transform duration-700;
        }
        
        .btn-secondary:hover::before {
            @apply translate-x-[100%];
        }
        
        .btn-tertiary {
            @apply bg-gradient-to-r from-[#4A4A4A] to-[#2D2D2D] text-white font-bold py-4 px-8 rounded-lg shadow-lg btn-hover border-2 border-[#6A6A6A] relative overflow-hidden;
        }
        
        .btn-tertiary::before {
            content: '';
            @apply absolute inset-0 bg-gradient-to-r from-[#6A6A6A]/30 to-transparent transform -skew-x-12 translate-x-[-100%] transition-transform duration-700;
        }
        
        .btn-tertiary:hover::before {
            @apply translate-x-[100%];
        }
        
        .modal {
            @apply fixed inset-0 z-50 flex items-center justify-center p-4 opacity-0 pointer-events-none modal-transition;
        }
        
        .modal.active {
            @apply opacity-100 pointer-events-auto;
        }
        
        .modal-content {
            @apply w-full max-w-2xl max-h-[90vh] overflow-y-auto rounded-xl p-6 glass-effect shadow-2xl transform scale-95 modal-transition;
        }
        
        .modal.active .modal-content {
            @apply scale-100;
        }
        
        .role-card {
            @apply flex items-center p-4 rounded-lg glass-effect mb-4;
        }
        
        .role-icon {
            @apply w-16 h-16 mr-4 object-contain;
        }
        
        .add-to-home {
            @apply flex flex-col items-center p-4 rounded-lg glass-effect mb-4;
        }
        
        .add-to-home-step {
            @apply flex items-start mb-4;
        }
        
        .step-number {
            @apply flex items-center justify-center w-8 h-8 rounded-full bg-primary text-white mr-3 flex-shrink-0;
        }
    </style>
</head>
<body class="font-sans text-light">
    <!-- 横屏提示 (默认显示) -->
    <div id="orientationNotice" class="fixed inset-0 flex flex-col items-center justify-center bg-black/90 z-50">
        <div class="text-center p-8 max-w-md">
            <i class="fa fa-exclamation-triangle text-red-600 text-6xl mb-6 animate-pulse"></i>
            <h2 class="text-3xl font-bold text-white mb-4">请将手机横屏！</h2>
            <p class="text-lg text-gray-300">为了获得最佳游戏体验，请将您的设备横屏后再继续。如果你是用微信打开的网站请点击右上角三个点，选择用默认浏览器打开。</p>
        </div>
    </div>

    <!-- 页面容器 (默认隐藏，横屏后显示) -->
    <div id="mainContent" class="container mx-auto px-4 py-12 flex flex-col items-center justify-center min-h-screen hidden">
        
        <!-- 游戏标题 -->
        <div class="text-center mb-12">
            <h1 class="text-4xl md:text-5xl font-serif font-medium mb-4 text-white text-shadow">
                女巫镇
            </h1>
            <p class="text-base md:text-lg text-shadow">1692年的塞勒姆，充满了谎言和欺骗...</p>
        </div>
        
        <!-- 按钮容器 -->
        <div class="flex flex-col md:flex-row flex-wrap justify-center gap-4 w-full max-w-4xl">
            <button id="startGameBtn" class="btn-primary text-lg md:text-xl flex items-center justify-center flex-1 min-w-[200px]">
                <i class="fa fa-play-circle mr-2"></i> 开始游戏
            </button>
            
            <button id="installBtn" class="btn-secondary text-lg md:text-xl flex items-center justify-center flex-1 min-w-[200px]">
                <i class="fa fa-download mr-2"></i> 安装到手机桌面
            </button>
            
            <button id="noticeBtn" class="btn-tertiary text-lg md:text-xl flex items-center justify-center flex-1 min-w-[200px]">
                <i class="fa fa-bullhorn mr-2"></i> 小镇告示栏
            </button>
        </div>
    </div>
    

    
    <!-- 安装到手机桌面模态框 -->
    <div id="installModal" class="modal">
        <div class="absolute inset-0 bg-black/70" id="installOverlay"></div>
        <div class="modal-content relative z-10">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-shadow-glow">安装到手机桌面</h2>
                <button id="closeInstallBtn" class="text-2xl hover:text-accent transition-colors">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-6">
                <p class="mb-4">将《女巫镇》安装到您的手机桌面，随时畅玩！</p>
                
                <div class="space-y-4">
                    <h3 class="text-xl font-bold text-secondary">iOS 设备</h3>
                    <div class="add-to-home">
                        <div class="add-to-home-step">
                            <div class="step-number">1</div>
                            <div>
                                <p>打开 Safari 浏览器，访问本页面</p>
                            </div>
                        </div>
                        <div class="add-to-home-step">
                            <div class="step-number">2</div>
                            <div>
                                <p>点击底部的 "分享" 按钮</p>
                            </div>
                        </div>
                        <div class="add-to-home-step">
                            <div class="step-number">3</div>
                            <div>
                                <p>选择 "添加到主屏幕"</p>
                            </div>
                        </div>
                        <div class="add-to-home-step">
                            <div class="step-number">4</div>
                            <div>
                                <p>点击 "添加" 完成</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="space-y-4">
                    <h3 class="text-xl font-bold text-secondary">Android 设备</h3>
                    <div class="add-to-home">
                        <div class="add-to-home-step">
                            <div class="step-number">1</div>
                            <div>
                                <p>打开 Chrome 浏览器，访问本页面</p>
                            </div>
                        </div>
                        <div class="add-to-home-step">
                            <div class="step-number">2</div>
                            <div>
                                <p>点击右上角的 "菜单" 按钮</p>
                            </div>
                        </div>
                        <div class="add-to-home-step">
                            <div class="step-number">3</div>
                            <div>
                                <p>选择 "添加到主屏幕" 或 "安装应用"</p>
                            </div>
                        </div>
                        <div class="add-to-home-step">
                            <div class="step-number">4</div>
                            <div>
                                <p>点击 "添加" 完成</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="text-center mt-6">
                    <p class="text-lg font-bold text-accent">安装完成后，您可以直接从手机桌面启动《女巫镇》！</p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 小镇告示栏模态框 -->
    <div id="noticeModal" class="modal">
        <div class="absolute inset-0 bg-black/70" id="noticeOverlay"></div>
        <div class="modal-content relative z-10">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold text-shadow-glow">小镇告示栏</h2>
                <button id="closeNoticeBtn" class="text-2xl hover:text-accent transition-colors">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            
            <div class="space-y-6">
                <div class="glass-effect p-6 rounded-xl">
                    <p class="text-lg mb-4">感谢小镇改良家们！</p>
                    <p class="text-base mb-6">特别致谢坤坤先生、薇薇小姐、李源琦大王、煎饼女士、昊昊先生、洋秘女士、美女丁小姐、平凡老师 —— 是你们化身 "bug 猎手"，扫清《女巫镇》里的潜藏隐患，用细致反馈为小镇的完美呈现保驾护航，由衷感谢每一份鼎力支持！</p>
                    <p class="text-base">小镇的迷雾依旧存在，期待未来继续与你们一同打磨，让小镇变得更加美好！</p>
                </div>
                
                <div class="text-center mt-4">
                    <p class="text-light/70">女巫镇全体居民敬上</p>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 检测屏幕方向并显示相应内容
            function checkOrientation() {
                const orientationNotice = document.getElementById('orientationNotice');
                const mainContent = document.getElementById('mainContent');
                
                // 检查窗口宽高比，大于1表示横屏
                if (window.innerWidth / window.innerHeight > 1) {
                    orientationNotice.classList.add('hidden');
                    mainContent.classList.remove('hidden');
                } else {
                    orientationNotice.classList.remove('hidden');
                    mainContent.classList.add('hidden');
                }
            }
            
            // 初始检查
            checkOrientation();
            
            // 监听窗口大小变化和方向变化
            window.addEventListener('resize', checkOrientation);
            window.addEventListener('orientationchange', checkOrientation);
            // 获取按钮和模态框元素
            const startGameBtn = document.getElementById('startGameBtn');
            const gameRulesBtn = document.getElementById('gameRulesBtn');
            const installBtn = document.getElementById('installBtn');
            const noticeBtn = document.getElementById('noticeBtn');
            
            const gameRulesModal = document.getElementById('gameRulesModal');
            const installModal = document.getElementById('installModal');
            const noticeModal = document.getElementById('noticeModal');
            
            const closeRulesBtn = document.getElementById('closeRulesBtn');
            const closeInstallBtn = document.getElementById('closeInstallBtn');
            const closeNoticeBtn = document.getElementById('closeNoticeBtn');
            
            const gameRulesOverlay = document.getElementById('gameRulesOverlay');
            const installOverlay = document.getElementById('installOverlay');
            const noticeOverlay = document.getElementById('noticeOverlay');
            
            // 开始游戏按钮点击事件
            startGameBtn.addEventListener('click', function() {
                // 添加点击动画效果
                gsap.to(startGameBtn, {
                    scale: 0.95,
                    duration: 0.1,
                    onComplete: function() {
                        gsap.to(startGameBtn, {
                            scale: 1,
                            duration: 0.1,
                            onComplete: function() {
                                // 跳转到游戏链接
                                window.location.href = 'http://118.31.222.7:8000/';
                            }
                        });
                    }
                });
            });
            
            // 游戏规则按钮点击事件
            gameRulesBtn.addEventListener('click', function() {
                // 添加点击动画效果
                gsap.to(gameRulesBtn, {
                    scale: 0.95,
                    duration: 0.1,
                    onComplete: function() {
                        gsap.to(gameRulesBtn, {
                            scale: 1,
                            duration: 0.1,
                            onComplete: function() {
                                // 显示游戏规则模态框
                                gameRulesModal.classList.add('active');
                                // 添加淡入动画
                                gsap.fromTo(gameRulesModal.querySelector('.modal-content'), 
                                    { opacity: 0, y: 20 },
                                    { opacity: 1, y: 0, duration: 0.3 }
                                );
                            }
                        });
                    }
                });
            });
            
            // 安装到手机桌面按钮点击事件
            installBtn.addEventListener('click', function() {
                // 添加点击动画效果
                gsap.to(installBtn, {
                    scale: 0.95,
                    duration: 0.1,
                    onComplete: function() {
                        gsap.to(installBtn, {
                            scale: 1,
                            duration: 0.1,
                            onComplete: function() {
                                // 显示安装模态框
                                installModal.classList.add('active');
                                // 添加淡入动画
                                gsap.fromTo(installModal.querySelector('.modal-content'), 
                                    { opacity: 0, y: 20 },
                                    { opacity: 1, y: 0, duration: 0.3 }
                                );
                            }
                        });
                    }
                });
            });
            
            // 小镇告示栏按钮点击事件
            noticeBtn.addEventListener('click', function() {
                // 添加点击动画效果
                gsap.to(noticeBtn, {
                    scale: 0.95,
                    duration: 0.1,
                    onComplete: function() {
                        gsap.to(noticeBtn, {
                            scale: 1,
                            duration: 0.1,
                            onComplete: function() {
                                // 显示告示栏模态框
                                noticeModal.classList.add('active');
                                // 添加淡入动画
                                gsap.fromTo(noticeModal.querySelector('.modal-content'), 
                                    { opacity: 0, y: 20 },
                                    { opacity: 1, y: 0, duration: 0.3 }
                                );
                            }
                        });
                    }
                });
            });
            
            // 关闭游戏规则模态框
            function closeGameRulesModal() {
                // 添加淡出动画
                gsap.fromTo(gameRulesModal.querySelector('.modal-content'), 
                    { opacity: 1, y: 0 },
                    { opacity: 0, y: 20, duration: 0.3, onComplete: function() {
                        gameRulesModal.classList.remove('active');
                    }}
                );
            }
            
            // 关闭安装模态框
            function closeInstallModal() {
                // 添加淡出动画
                gsap.fromTo(installModal.querySelector('.modal-content'), 
                    { opacity: 1, y: 0 },
                    { opacity: 0, y: 20, duration: 0.3, onComplete: function() {
                        installModal.classList.remove('active');
                    }}
                );
            }
            
            // 关闭告示栏模态框
            function closeNoticeModal() {
                // 添加淡出动画
                gsap.fromTo(noticeModal.querySelector('.modal-content'), 
                    { opacity: 1, y: 0 },
                    { opacity: 0, y: 20, duration: 0.3, onComplete: function() {
                        noticeModal.classList.remove('active');
                    }}
                );
            }
            
            // 绑定关闭按钮事件
            closeRulesBtn.addEventListener('click', closeGameRulesModal);
            closeInstallBtn.addEventListener('click', closeInstallModal);
            closeNoticeBtn.addEventListener('click', closeNoticeModal);
            
            // 点击遮罩层关闭模态框
            gameRulesOverlay.addEventListener('click', closeGameRulesModal);
            installOverlay.addEventListener('click', closeInstallModal);
            noticeOverlay.addEventListener('click', closeNoticeModal);
            
            // 阻止模态框内容点击事件冒泡
            gameRulesModal.querySelector('.modal-content').addEventListener('click', function(e) {
                e.stopPropagation();
            });
            
            installModal.querySelector('.modal-content').addEventListener('click', function(e) {
                e.stopPropagation();
            });
            
            noticeModal.querySelector('.modal-content').addEventListener('click', function(e) {
                e.stopPropagation();
            });
            
            // 添加键盘事件，ESC键关闭模态框
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    if (gameRulesModal.classList.contains('active')) {
                        closeGameRulesModal();
                    }
                    if (installModal.classList.contains('active')) {
                        closeInstallModal();
                    }
                    if (noticeModal.classList.contains('active')) {
                        closeNoticeModal();
                    }
                }
            });
            
            // 添加页面加载动画
            gsap.fromTo('.container > *', 
                { opacity: 0, y: 30 },
                { opacity: 1, y: 0, duration: 0.8, stagger: 0.2, ease: 'power3.out' }
            );
            
            // 添加按钮悬停效果
            const buttons = document.querySelectorAll('button');
            buttons.forEach(button => {
                button.addEventListener('mouseenter', function() {
                    gsap.to(this, { scale: 1.05, duration: 0.2 });
                });
                
                button.addEventListener('mouseleave', function() {
                    gsap.to(this, { scale: 1, duration: 0.2 });
                });
            });
        });
    </script>
</body>
</html>
